*** Settings ***
Library           Selenium2Library
Test Setup        Test_Setup_Steps
Test Teardown     Close Browser
Suite Teardown    Close Browser
Force Tags        FunctionalTest

*** Keywords ***
Test_Setup_Steps
    Set Selenium Speed    0.1
    Open Browser    ${login address}
    Maximize Browser Window
    Input Text    inputUsername    ${login test}
    Input Text    inputPassword    ${password test}
    Click Button    tag=button

*** Variables ***
${login address}    http://django-smstest2.rhcloud.com/
${login address-local}    http://127.0.0.1:8000/
${login test}     semuschenko
${password test}    pDk7jf

*** Test Cases ***
Test 1 Change role from the director to the teacher of the same school
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    Click Element    xpath=//*[@id='9']/td[3]/select/option[@value="3"]
    Reload Page
    ${result}    Get Value    xpath= //*[@id='10']/td[3]/select
    Should Be Equal    ${result}    3
    Click Link    /mainteacher/schools_list/
    List Selection Should Be    xpath=//*[@id='3']/td[3]/select    Відсутній
   
Test 2 Change role from the teacher to the director of the same school
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    Click Element    xpath=//*[@id='10']/td[3]/select/option[@value="2"]
    Reload Page
    ${result}    Get Value    xpath=//*[@id='9']/td[3]/select
    Should Be Equal    ${result}    3
    Click Link    /mainteacher/schools_list/
    List Selection Should Be    xpath=//*[@id='3']/td[3]/select    Григорук Олег Степанович
    
Test 3 Change role from the teacher to the director of the same school when there exist another director (teachers_list)
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    Click Element    xpath=//*[@id='9']/td[3]/select/option[@value="2"]
    Reload Page
    ${result}    Get Value    xpath= //*[@id='10']/td[3]/select
    Should Be Equal    ${result}    3
    Click Link    /mainteacher/schools_list/
    List Selection Should Be    xpath=//*[@id='3']/td[3]/select    Аношко Петро Микитович
    
Test 4 Change role to the director of the school when there exist another director (schools_list page)
    [Tags]    ValidTest    AddToSchool
    Click Element    xpath=//*[@id='5']/td[3]/select/option[@value="11"]
    Click Link    /mainteacher/teachers_list/
    ${result}    Get Value    xpath= //*[@id='12']/td[3]/select
    Should Be Equal    ${result}    3
    ${result}    Get Value    xpath= //*[@id='11']/td[3]/select
    Should Be Equal    ${result}    2
    
Test 5 Add the teacher to school when he wasn't connected to any school
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    Click Element    xpath=//*[@id='7']/td[4]/select/option[@value="1"]
    Reload Page
    Click Link    /mainteacher/schools_list/
    Element Should Contain    xpath= //*[@id='1']/td[3]    Панасюк Ігор Микитович
    
Test 6 Change school when he was the director in another
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    ${result}    Get Value    xpath= //*[@id='6']/td[3]/select
    Should Be Equal    ${result}    2
    Click Element    xpath=//*[@id='6']/td[4]/select/option[@value="5"]
    Reload Page
    Click Link    /mainteacher/schools_list/
    Element Should Contain    xpath= //*[@id='5']/td[3]    Охріменко Василь Георгійович
    
Test 7 Change role from the director to Відсутній
    [Tags]    ValidTest    AddToSchool
    Click Element    xpath=//*[@id='4']/td[3]/select/option[@value=""]
    Click Link    /mainteacher/teachers_list/
    ${result}    Get Value    xpath= //*[@id='13']/td[3]/select
    Should Be Equal    ${result}    3
    
Test 8 Create the teacher to school using add form
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    Click Element    //*[@id='list']/table/thead/tr/th[5]/a
    Wait Until Page Contains Element    id=inputName
    Input Text    inputName    Ковальчук Остап Казимирович
    Input Text    inputEmail    koval@orbit.com
    Input Text    inputLogin    koval
    Select From List By Value    //*[@id='selectSchool']    2
    Click Button    Прийняти
    Click Link    /mainteacher/schools_list/
    Element Should Contain    //*[@id='2']/td[3]    Ковальчук Остап Казимирович
    
Test 9 Change school when he was the teacher in another
    [Tags]    ValidTest    AddToSchool
    Click Link    /mainteacher/teachers_list/
    ${result}    Get Value    xpath= //*[@id='16']/td[3]/select
    Should Be Equal    ${result}    3
    Click Element    xpath=//*[@id='16']/td[4]/select/option[@value="3"]
    Click Link    /mainteacher/schools_list/
    Element Should Contain    xpath= //*[@id='3']/td[3]    Левицька Тамара Сергіївна

Restore previous state 
    [Tags]    RestoreTest    EditProfile
    Click Link    /mainteacher/teachers_list/
    Click Element    xpath= //*[@id='1']/td[4]/select/option[@value="2"]
    Click Link    /mainteacher/schools_list/
    Click Element    xpath= //*[@id='2']/td[3]/select/option[@value="1"]
    List Selection Should Be    xpath=//*[@id='2']/td[3]/select    Зощенко Іван Вікторович
